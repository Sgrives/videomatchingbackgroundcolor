"use strict";function drawingLoop(){requestId=window.requestAnimationFrame(drawingLoop),ctx.drawImage(vid,0,0,vidWidth,vidHeight,0,0,canvas.width,canvas.height)}function setVideoBgColor(e,t){var i=document.createElement("canvas");i.width=8,i.height=8;var d=i.getContext("2d");d.drawImage(e,0,0,8,8);var a=d.getImageData(0,0,8,8).data;t.style.backgroundColor="rgb("+a[60]+","+a[61]+","+a[62]+")"}var vid=document.getElementById("exampleVideo"),wrapper=document.getElementById("wrapper"),canvas=document.getElementById("exampleCanvas"),ctx=canvas.getContext("2d"),ratio=window.devicePixelRatio||1,vidWidth,vidHeight;vid.addEventListener("loadedmetadata",function(e){console.log("onloadedmetadata"),vid.style.transform="scale("+ratio+")",vidWidth=vid.videoWidth,vidHeight=vid.videoHeight,canvas.width=vid.offsetWidth*ratio,canvas.height=vid.offsetHeight*ratio,canvas.style.width=vid.offsetWidth+"px",canvas.style.height=vid.offsetHeight+"px",drawingLoop(),vid.style.transform="scale(1)"}),vid.addEventListener("loadeddata",function(e){console.log("onloadeddata"),setVideoBgColor(vid,wrapper),vid.play()}),window.onresize=function(e){vid.style.transform="scale("+ratio+")",vidWidth=vid.videoWidth,vidHeight=vid.videoHeight,canvas.width=vid.offsetWidth*ratio,canvas.height=vid.offsetHeight*ratio,canvas.style.width=vid.offsetWidth+"px",canvas.style.height=vid.offsetHeight+"px",ctx.drawImage(vid,0,0,vidWidth,vidHeight,0,0,canvas.width,canvas.height),vid.style.transform="scale(1)"},vid.src=vid.dataset.src,vid.play(),function(){var e=function e(t){vid.paused&&(vid.play(),document.getElementById("mobileInstructions").style.visibility="hidden"),document.removeEventListener("touchstart",e),document.removeEventListener("touchend",e),document.removeEventListener("scroll",e)};document.addEventListener("touchstart",e),document.addEventListener("touchend",e),document.addEventListener("scroll",e),vid.paused&&(document.getElementById("mobileInstructions").style.visibility="visible")}();